{"ast":null,"code":"import _slicedToArray from \"/home/server/Escritorio/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/server/Escritorio/frontend/src/componets/commons/header.js\";\nimport React, { componets, useState } from \"react\";\nimport { SINGIN_VALIDATIONS } from \"../commons/auth/validation\";\nimport { useAuth } from \"../commons/auth/auth-context\";\nimport { useForm } from \"react-hook-form\";\n\nfunction Header() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFormOpen = _useState2[0],\n      setIsFormOpen = _useState2[1];\n\n  return React.createElement(\"nav\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, \"Inicio \"), React.createElement(\"a\", {\n    href: \"/consultar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, \"Consultar \"), React.createElement(\"a\", {\n    href: \"/registrarse\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, \"Registrarse\"), React.createElement(\"a\", {\n    href: \"/contacto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, \"Contacto\"), React.createElement(\"a\", {\n    onClick: function onClick() {\n      return setIsFormOpen(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }, \"Log in\"), isFormOpen && React.createElement(Login, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }));\n}\n\nfunction Login(props) {\n  var _useAuth = useAuth(),\n      singIN = _useAuth.singIN;\n\n  var _useForm = useForm({\n    mode: \"onBlur\" // Lanza validaciones cada vez que hago blur\n\n  }),\n      register = _useForm.register,\n      errors = _useForm.errors,\n      formState = _useForm.formState,\n      handleSubmit = _useForm.handleSubmit,\n      setError = _useForm.setError;\n\n  var handleSignIn = function handleSignIn(formData) {\n    return singIN(formData).catch(function (error) {\n      console.log(\"error\");\n\n      try {\n        var statusl = document.getElementById(\"statusl\");\n\n        if (error.response.status === 401) {\n          statusl.innerHTML = \"Contrase\\xF1a o correo erroneos\";\n        } else {\n          statusl.innerHTML = \"Algo a ido mal intentelo de nuevo Error:\".concat(error.response.status);\n        }\n      } catch (_unused) {}\n    });\n  };\n\n  return React.createElement(\"span\", {\n    id: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: function onClick() {\n      var login = document.getElementById('login');\n      login.innerHTML = \"\";\n      login.parentNode.removeChild(login);\n    },\n    className: \"close\",\n    id: \"close\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"X\"), React.createElement(\"form\", {\n    action: \"\",\n    method: \"post\",\n    onSubmit: handleSubmit(handleSignIn),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    id: \"statusl\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Email\"), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"email\",\n    ref: register(SINGIN_VALIDATIONS.email),\n    name: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"errorMessage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, errors.name && errors.name.message), React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Contrase\\xF1a\"), React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    ref: register(SINGIN_VALIDATIONS.password),\n    name: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"errorMessage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, errors.name && errors.name.message), React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: formState.isSubmitting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Entrar\")))));\n}\n\nexport default Header;","map":{"version":3,"sources":["/home/server/Escritorio/frontend/src/componets/commons/header.js"],"names":["React","componets","useState","SINGIN_VALIDATIONS","useAuth","useForm","Header","isFormOpen","setIsFormOpen","Login","props","singIN","mode","register","errors","formState","handleSubmit","setError","handleSignIn","formData","catch","error","console","log","statusl","document","getElementById","response","status","innerHTML","login","parentNode","removeChild","email","name","message","password","isSubmitting"],"mappings":"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","sourcesContent":["import React, { componets, useState } from \"react\";\r\nimport { SINGIN_VALIDATIONS } from \"../commons/auth/validation\";\r\nimport { useAuth } from \"../commons/auth/auth-context\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nfunction Header() {\r\n \r\n\r\nconst [isFormOpen, setIsFormOpen] = useState(false);\r\n  \r\n  return (\r\n    <nav>\r\n      <a href=\"/\">Inicio </a>\r\n      <a href=\"/consultar\">Consultar </a>\r\n      <a href=\"/registrarse\">Registrarse</a>\r\n      <a href=\"/contacto\">Contacto</a>\r\n      <a onClick={() => setIsFormOpen(true)}>Log in</a>\r\n      {isFormOpen && <Login />}\r\n\r\n    </nav>\r\n );\r\n}\r\n\r\nfunction Login(props) {\r\n\r\n  \r\n\r\n  const { singIN } = useAuth();\r\n  const { register, errors, formState, handleSubmit, setError } = useForm({\r\n    mode: \"onBlur\" // Lanza validaciones cada vez que hago blur\r\n  });\r\n\r\n  const handleSignIn = formData => {\r\n    return singIN(formData).catch(error => {\r\n      console.log(\"error\")\r\n      try{\r\n      let statusl=document.getElementById(\"statusl\");\r\n      \r\n      if (error.response.status === 401) {\r\n        statusl.innerHTML=`Contraseña o correo erroneos`;\r\n      }else{\r\n        statusl.innerHTML=`Algo a ido mal intentelo de nuevo Error:${error.response.status}`;\r\n      }\r\n    }catch{\r\n    }\r\n    });\r\n  };\r\n\r\n  return (\r\n \r\n  <span id=\"login\">  \r\n  <div>\r\n    <button onClick={()=>{let login = document.getElementById('login');\r\n login.innerHTML=\"\"  \r\n  login.parentNode.removeChild(login)}} className=\"close\" id=\"close\">X</button>\r\n    <form action=\"\" method=\"post\" onSubmit={handleSubmit(handleSignIn)}>\r\n    <span id=\"statusl\"></span>\r\n      <fieldset>\r\n        <label htmlFor=\"email\">Email</label>\r\n        <input type=\"text\" id=\"email\"\r\n        ref={register(SINGIN_VALIDATIONS.email)}\r\n         name=\"email\" />\r\n         <span className=\"errorMessage\">\r\n            {errors.name && errors.name.message}\r\n          </span>\r\n        <label htmlFor=\"password\">Contraseña</label>\r\n        <input type=\"password\" id=\"password\"\r\n        ref={register(SINGIN_VALIDATIONS.password)}\r\n        name=\"password\" />\r\n        <span className=\"errorMessage\">\r\n            {errors.name && errors.name.message}\r\n          </span>\r\n        <button type=\"submit\" disabled={formState.isSubmitting}>\r\n          Entrar\r\n        </button>\r\n      </fieldset>\r\n    </form>\r\n    </div>\r\n  </span>\r\n  );\r\n}\r\n\r\n\r\nexport default Header;\r\n"]},"metadata":{},"sourceType":"module"}